
# Quarkus Development Configuration
# Based on ADR-0001: Inner Loop Development Architecture
# Research-validated performance targets: 95th percentile < 5 seconds live reload

# === Live Reload Configuration ===
# Enable live reload with optimized settings
quarkus.live-reload.enabled=true
quarkus.live-reload.instrumentation=true
quarkus.live-reload.watched-resources=src/main/java/**,src/main/resources/**

# Hot deployment optimization
quarkus.dev.instrumentation=true
quarkus.dev.remote-dev-url=http://localhost:8080

# === Performance Optimization ===
# JVM settings for faster startup and reload
quarkus.native.builder-image=registry.access.redhat.com/ubi8/openjdk-21:1.20

# Maven repository caching for faster startup
quarkus.maven.offline=false
quarkus.maven.local-repo-path=/home/user/.m2/repository

# === Database Configuration ===
# PostgreSQL connection with research-validated service discovery
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=attendee
quarkus.datasource.password=workshop
quarkus.datasource.jdbc.url=jdbc:postgresql://ddd-workshop-postgresql.ddd-workshop.svc.cluster.local:5432/conference

# Connection pool optimization for workshop environment
quarkus.datasource.jdbc.min-size=2
quarkus.datasource.jdbc.max-size=8
quarkus.datasource.jdbc.acquisition-timeout=PT30S

# === Kafka Configuration ===
# Event streaming with research-validated service discovery
kafka.bootstrap.servers=ddd-workshop-kafka.ddd-workshop.svc.cluster.local:9092
mp.messaging.connector.smallrye-kafka.bootstrap.servers=ddd-workshop-kafka.ddd-workshop.svc.cluster.local:9092

# Kafka producer optimization for workshop
mp.messaging.outgoing.events.connector=smallrye-kafka
mp.messaging.outgoing.events.topic=workshop-events
mp.messaging.outgoing.events.key.serializer=org.apache.kafka.common.serialization.StringSerializer
mp.messaging.outgoing.events.value.serializer=org.apache.kafka.common.serialization.StringSerializer

# Kafka consumer optimization
mp.messaging.incoming.events.connector=smallrye-kafka
mp.messaging.incoming.events.topic=workshop-events
mp.messaging.incoming.events.key.deserializer=org.apache.kafka.common.serialization.StringDeserializer
mp.messaging.incoming.events.value.deserializer=org.apache.kafka.common.serialization.StringDeserializer
mp.messaging.incoming.events.group.id=workshop-group

# === HTTP Configuration ===
# Optimized for development environment
quarkus.http.host=0.0.0.0
quarkus.http.port=8080
quarkus.http.cors=true
quarkus.http.cors.origins=*

# === Debug Configuration ===
# Integrated debugging capabilities (port 5005)
quarkus.debug.enabled=true
quarkus.debug.host=0.0.0.0
quarkus.debug.port=5005

# === Logging Configuration ===
# Optimized logging for development
quarkus.log.level=INFO
quarkus.log.category."io.quarkus".level=INFO
quarkus.log.category."org.hibernate".level=WARN
quarkus.log.category."org.apache.kafka".level=WARN

# Console logging with colors for better development experience
quarkus.log.console.enable=true
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n
quarkus.log.console.color=true

# === Health Check Configuration ===
# Health checks for service connectivity validation
quarkus.health.enabled=true
quarkus.health.openapi.included=true

# Custom health checks for workshop infrastructure
quarkus.health.extensions.enabled=true

# === Metrics Configuration ===
# Performance monitoring for research validation
quarkus.micrometer.enabled=true
quarkus.micrometer.export.prometheus.enabled=true
quarkus.micrometer.export.prometheus.path=/q/metrics

# === Development Tools Integration ===
# Maven and Git integration
quarkus.maven.offline=false
quarkus.dev.remote-dev-url=http://localhost:8080

# === Workshop-Specific Configuration ===
# Golden Path validation settings
workshop.golden-path.version=1.0.0
workshop.golden-path.validation.enabled=true

# Performance targets from research
workshop.performance.live-reload.target-ms=5000
workshop.performance.startup.target-ms=300000
workshop.performance.concurrent-users=20

# Service connectivity validation
workshop.services.postgresql.host=ddd-workshop-postgresql.ddd-workshop.svc.cluster.local
workshop.services.postgresql.port=5432
workshop.services.kafka.host=ddd-workshop-kafka.ddd-workshop.svc.cluster.local
workshop.services.kafka.port=9092

# === OpenShift Dev Spaces Integration ===
# Optimized for Dev Spaces environment
quarkus.container-image.build=false
quarkus.kubernetes.deploy=false

# Resource optimization based on research findings
quarkus.kubernetes.resources.requests.memory=512Mi
quarkus.kubernetes.resources.limits.memory=1Gi
quarkus.kubernetes.resources.requests.cpu=250m
quarkus.kubernetes.resources.limits.cpu=500m
# Additional logging for workshop debugging
quarkus.log.category."dddhexagonalworkshop".level=DEBUG

# Hibernate ORM configuration
quarkus.hibernate-orm.log.sql=true
quarkus.hibernate-orm.database.generation=drop-and-create
